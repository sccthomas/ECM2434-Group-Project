{% extends 'navbar.html' %}
{% load static %}

{% block title %} Profile {% endblock %}

{% block header %}
    <link rel="stylesheet" href="{% static 'assets/fonts/material-icons.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/fonts/simple-line-icons.min.css' %}">
    <style>
        .main-content {
            background-color: var(--secondary) transparent;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="profile-stat" style="text-align: center; display: inline-block; padding: 1vw;">
        <h1 style=";font-size: 30px;padding-bottom: 5px;color: var(--bs-black);--bs-body-color: var(--bs-primary);">
            <strong>Profile</strong></h1>
        <h2><strong>{{ user.get_username }}</strong></h2>
    </div>
    <div class="text-center d-flex flex-column justify-content-center align-items-center py-3">
        <div class="bs-icon-xl bs-icon-circle bs-icon-primary d-flex flex-shrink-0 justify-content-center align-items-center d-inline-block mb-2 bs-icon"
             style="background: #719a5e;width: 100px;height: 100px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2"
                 stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"
                 class="icon icon-tabler icon-tabler-currency-pound" style="font-size: 60px;">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M17 18.5a6 6 0 0 1 -5 0a6 6 0 0 0 -5 .5a3 3 0 0 0 2 -2.5v-7.5a4 4 0 0 1 7.45 -2m-2.55 6h-7"></path>
            </svg>
        </div>
        <div class="px-3 profile-stat">
            <h2 class="fw-bold mb-0">{{ Profile.points }}</h2>
            <p class="mb-0">Points</p>
        </div>
    </div>
    <div class="container py-4 py-xl-5">
        <div class="row gy-4 row-cols-2 row-cols-md-4">
            <div class="col">
                <div class="text-center d-flex flex-column justify-content-center align-items-center py-3">
                    <div class="bs-icon-xl bs-icon-circle bs-icon-primary d-flex flex-shrink-0 justify-content-center align-items-center d-inline-block mb-2 bs-icon"
                         style="background: #719a5e;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"
                             stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                             stroke-linejoin="round" class="icon icon-tabler icon-tabler-chart-bubble">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <circle cx="6" cy="16" r="3"></circle>
                            <circle cx="16" cy="19" r="2"></circle>
                            <circle cx="14.5" cy="7.5" r="4.5"></circle>
                        </svg>
                    </div>
                    <div class="px-3 profile-stat">
                        <h2 class="fw-bold mb-0">{{ Profile.carbon }} kg/CO<sup>2</sup></h2>
                        <p class="mb-0">Carbon FootPrint</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="text-center d-flex flex-column justify-content-center align-items-center py-3">
                    <div class="bs-icon-xl bs-icon-circle bs-icon-primary d-flex flex-shrink-0 justify-content-center align-items-center d-inline-block mb-2 bs-icon"
                         style="background: #719a5e;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor"
                             viewBox="0 0 16 16" class="bi bi-recycle">
                            <path
                                    d="M9.302 1.256a1.5 1.5 0 0 0-2.604 0l-1.704 2.98a.5.5 0 0 0 .869.497l1.703-2.981a.5.5 0 0 1 .868 0l2.54 4.444-1.256-.337a.5.5 0 1 0-.26.966l2.415.647a.5.5 0 0 0 .613-.353l.647-2.415a.5.5 0 1 0-.966-.259l-.333 1.242-2.532-4.431zM2.973 7.773l-1.255.337a.5.5 0 1 1-.26-.966l2.416-.647a.5.5 0 0 1 .612.353l.647 2.415a.5.5 0 0 1-.966.259l-.333-1.242-2.545 4.454a.5.5 0 0 0 .434.748H5a.5.5 0 0 1 0 1H1.723A1.5 1.5 0 0 1 .421 12.24l2.552-4.467zm10.89 1.463a.5.5 0 1 0-.868.496l1.716 3.004a.5.5 0 0 1-.434.748h-5.57l.647-.646a.5.5 0 1 0-.708-.707l-1.5 1.5a.498.498 0 0 0 0 .707l1.5 1.5a.5.5 0 1 0 .708-.707l-.647-.647h5.57a1.5 1.5 0 0 0 1.302-2.244l-1.716-3.004z">
                            </path>
                        </svg>
                    </div>
                    <div class="px-3 profile-stat">
                        <h2 class="fw-bold mb-0">{{ Profile.curweek }} kg</h2>
                        <p class="mb-0">Week</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="text-center d-flex flex-column justify-content-center align-items-center py-3">
                    <div class="bs-icon-xl bs-icon-circle bs-icon-primary d-flex flex-shrink-0 justify-content-center align-items-center d-inline-block mb-2 bs-icon"
                         style="background: #719a5e;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor"
                             viewBox="0 0 16 16" class="bi bi-recycle">
                            <path
                                    d="M9.302 1.256a1.5 1.5 0 0 0-2.604 0l-1.704 2.98a.5.5 0 0 0 .869.497l1.703-2.981a.5.5 0 0 1 .868 0l2.54 4.444-1.256-.337a.5.5 0 1 0-.26.966l2.415.647a.5.5 0 0 0 .613-.353l.647-2.415a.5.5 0 1 0-.966-.259l-.333 1.242-2.532-4.431zM2.973 7.773l-1.255.337a.5.5 0 1 1-.26-.966l2.416-.647a.5.5 0 0 1 .612.353l.647 2.415a.5.5 0 0 1-.966.259l-.333-1.242-2.545 4.454a.5.5 0 0 0 .434.748H5a.5.5 0 0 1 0 1H1.723A1.5 1.5 0 0 1 .421 12.24l2.552-4.467zm10.89 1.463a.5.5 0 1 0-.868.496l1.716 3.004a.5.5 0 0 1-.434.748h-5.57l.647-.646a.5.5 0 1 0-.708-.707l-1.5 1.5a.498.498 0 0 0 0 .707l1.5 1.5a.5.5 0 1 0 .708-.707l-.647-.647h5.57a1.5 1.5 0 0 0 1.302-2.244l-1.716-3.004z">
                            </path>
                        </svg>
                    </div>
                    <div class="px-3 profile-stat">
                        <h2 class="fw-bold mb-0">{{ Profile.curmonth }} kg</h2>
                        <p class="mb-0">Month</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="text-center d-flex flex-column justify-content-center align-items-center py-3">
                    <div class="bs-icon-xl bs-icon-circle bs-icon-primary d-flex flex-shrink-0 justify-content-center align-items-center d-inline-block mb-2 bs-icon"
                         style="background: #719a5e;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor"
                             viewBox="0 0 16 16" class="bi bi-recycle">
                            <path
                                    d="M9.302 1.256a1.5 1.5 0 0 0-2.604 0l-1.704 2.98a.5.5 0 0 0 .869.497l1.703-2.981a.5.5 0 0 1 .868 0l2.54 4.444-1.256-.337a.5.5 0 1 0-.26.966l2.415.647a.5.5 0 0 0 .613-.353l.647-2.415a.5.5 0 1 0-.966-.259l-.333 1.242-2.532-4.431zM2.973 7.773l-1.255.337a.5.5 0 1 1-.26-.966l2.416-.647a.5.5 0 0 1 .612.353l.647 2.415a.5.5 0 0 1-.966.259l-.333-1.242-2.545 4.454a.5.5 0 0 0 .434.748H5a.5.5 0 0 1 0 1H1.723A1.5 1.5 0 0 1 .421 12.24l2.552-4.467zm10.89 1.463a.5.5 0 1 0-.868.496l1.716 3.004a.5.5 0 0 1-.434.748h-5.57l.647-.646a.5.5 0 1 0-.708-.707l-1.5 1.5a.498.498 0 0 0 0 .707l1.5 1.5a.5.5 0 1 0 .708-.707l-.647-.647h5.57a1.5 1.5 0 0 0 1.302-2.244l-1.716-3.004z">
                            </path>
                        </svg>
                    </div>
                    <div class="px-3 profile-stat">
                        <h2 class="fw-bold mb-0">{{ Profile.curyear }} kg</h2>
                        <p class="mb-0">Year</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container py-4 py-xl-5">
        <div class="row gy-4 row-cols-1 row-cols-md-2 row-cols-xl-3">
            <div class="col">
                <div class="card">
                    <div class="card-body p-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor"
                             viewBox="0 0 16 16" class="bi bi-broadcast-pin"
                             style="font-size: 46px;background: #719a5e;border-color: var(--bs-light);color: var(--bs-light);border-radius: 8px;">
                            <path
                                    d="M3.05 3.05a7 7 0 0 0 0 9.9.5.5 0 0 1-.707.707 8 8 0 0 1 0-11.314.5.5 0 0 1 .707.707zm2.122 2.122a4 4 0 0 0 0 5.656.5.5 0 1 1-.708.708 5 5 0 0 1 0-7.072.5.5 0 0 1 .708.708zm5.656-.708a.5.5 0 0 1 .708 0 5 5 0 0 1 0 7.072.5.5 0 1 1-.708-.708 4 4 0 0 0 0-5.656.5.5 0 0 1 0-.708zm2.122-2.12a.5.5 0 0 1 .707 0 8 8 0 0 1 0 11.313.5.5 0 0 1-.707-.707 7 7 0 0 0 0-9.9.5.5 0 0 1 0-.707zM6 8a2 2 0 1 1 2.5 1.937V15.5a.5.5 0 0 1-1 0V9.937A2 2 0 0 1 6 8z">
                            </path>
                        </svg>
                        <h4 class="card-title">Your last recycle</h4>
                        {% if lastTrans != 0 %}
                            <p>At {{ lastTrans.time }} you recycled {{ lastTrans.product.name }} at bin
                                : {{ lastTrans.bin.binName }}</p>
                        {% endif %}
                        {% if lastTrans == 0 %}
                            <p>No recent recycle</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <div class="card-body p-4" style="margin-bottom: -1px;padding-bottom: 24px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none"
                             style="font-size: 44px;color: var(--bs-light);background: #719a5e;border-radius: 8px;">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M12.0122 5.57169L10.9252 4.48469C8.77734 2.33681 5.29493 2.33681 3.14705 4.48469C0.999162 6.63258 0.999162 10.115 3.14705 12.2629L11.9859 21.1017L11.9877 21.0999L12.014 21.1262L20.8528 12.2874C23.0007 10.1395 23.0007 6.65711 20.8528 4.50923C18.705 2.36134 15.2226 2.36134 13.0747 4.50923L12.0122 5.57169ZM11.9877 18.2715L16.9239 13.3352L18.3747 11.9342L18.3762 11.9356L19.4386 10.8732C20.8055 9.50635 20.8055 7.29028 19.4386 5.92344C18.0718 4.55661 15.8557 4.55661 14.4889 5.92344L12.0133 8.39904L12.006 8.3918L12.005 8.39287L9.51101 5.89891C8.14417 4.53207 5.92809 4.53207 4.56126 5.89891C3.19442 7.26574 3.19442 9.48182 4.56126 10.8487L7.10068 13.3881L7.10248 13.3863L11.9877 18.2715Z"
                                  fill="currentColor"></path>
                        </svg>
                        <h4 class="card-title">What you love recycling</h4><img>
                        {% if loveRecycling != 0 %}
                            <p>You love recycling:<br>{{ loveRecycling.product.name }}</p>
                        {% endif %}
                        {% if loveRecycling == 0 %}
                            <p>No recent recycle</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <div class="card-body"><i class="material-icons"
                                              style="font-size: 56px;color: var(--bs-primary);background: #719a5e;border-radius: 8px;">account_circle</i>
                        <h4 class="card-title">Account Settings</h4>
                        <h6 class="text-muted card-subtitle mb-2"></h6>
                        <p class="card-text"></p><a class="card-link" href="{% url 'password' %}">Manage Password</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <div class="card-header"><i class="icon-target"
                                                style="font-size: 44px;background: #719a5e;border-radius: 8px;color: var(--bs-light);border-color: var(--bs-light);"></i>
                        <div>
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item" role="presentation"><a class="nav-link" role="tab"
                                                                            data-bs-toggle="tab"
                                                                            href="#tab-1">Tab 1</a>
                                </li>
                                <li class="nav-item" role="presentation"><a class="nav-link active" role="tab"
                                                                            data-bs-toggle="tab" href="#tab-2">Tab 2</a>
                                </li>
                                <li class="nav-item" role="presentation"><a class="nav-link" role="tab"
                                                                            data-bs-toggle="tab"
                                                                            href="#tab-3">Tab 3</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                {% if UserGoal1 %}
                                    <div class="tab-pane" role="tabpanel" id="tab-1">
                                        <p>{{ UserGoal1.goal.name }} {{ UserGoal1.goalType }} items</p>
                                        <p><em>{{ UserGoal1.goal.description }} {{ UserGoal1.goalType }} in order to
                                            gain 100 points and have the greatest impact on the environment</em></p>
                                        <div class="progress">
                                            <div class="progress-bar" aria-valuenow="{{ UserGoal1.value }}"
                                                 aria-valuemin="0"
                                                 aria-valuemax="100" style="width: {{ UserGoal1.value }}%;">
                                                {{ UserGoal1.value }}%
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if UserGoal2 %}
                                    <div class="tab-pane active" role="tabpanel" id="tab-2">
                                        <p>{{ UserGoal2.goal.name }} {{ UserGoal2.goalType }} items</p>
                                        <p><em>{{ UserGoal2.goal.description }} {{ UserGoal2.goalType }} in order to
                                            gain 100 points and have the greatest impact on the environment</em></p>
                                        <div class="progress">
                                            <div class="progress-bar" aria-valuenow="{{ UserGoal2.value }}"
                                                 aria-valuemin="0"
                                                 aria-valuemax="100" style="width: {{ UserGoal2.value }}%;">
                                                {{ UserGoal2.value }}%
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if UserGoal2 %}
                                    <div class="tab-pane" role="tabpanel" id="tab-3">
                                        <p>{{ UserGoal3.goal.name }} {{ UserGoal3.goalType }} items</p>
                                        <p><em>{{ UserGoal3.goal.description }} {{ UserGoal3.goalType }} in order to
                                            gain 100 points and have the greatest impact on the environment</em></p>
                                        <div class="progress">
                                            <div class="progress-bar" aria-valuenow="{{ UserGoal3.value }}"
                                                 aria-valuemin="0"
                                                 aria-valuemax="100" style="width: {{ UserGoal3.value }}%;">
                                                {{ UserGoal3.value }}%
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body" style="text-align: center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none"
                             style="font-size: 55px;color: var(--bs-light);background: #719a5e;border-radius: 8px;">
                            <path
                                    d="M3 4C3 3.44772 3.44772 3 4 3H12C12.5523 3 13 3.44772 13 4C13 4.55228 12.5523 5 12 5H4C3.44772 5 3 4.55228 3 4Z"
                                    fill="currentColor" fill-opacity="0.5"></path>
                            <path
                                    d="M3 12C3 11.4477 3.44772 11 4 11H12C12.5523 11 13 11.4477 13 12C13 12.5523 12.5523 13 12 13H4C3.44772 13 3 12.5523 3 12Z"
                                    fill="currentColor" fill-opacity="0.5"></path>
                            <path
                                    d="M3 16C3 15.4477 3.44772 15 4 15H12C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17H4C3.44772 17 3 16.5523 3 16Z"
                                    fill="currentColor" fill-opacity="0.5"></path>
                            <path
                                    d="M3 20C3 19.4477 3.44772 19 4 19H12C12.5523 19 13 19.4477 13 20C13 20.5523 12.5523 21 12 21H4C3.44772 21 3 20.5523 3 20Z"
                                    fill="currentColor" fill-opacity="0.5"></path>
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M15.1707 9C15.5825 10.1652 16.6938 11 18 11C19.6569 11 21 9.65685 21 8C21 6.34315 19.6569 5 18 5C16.6938 5 15.5825 5.83481 15.1707 7H4C3.44772 7 3 7.44772 3 8C3 8.55228 3.44772 9 4 9H15.1707ZM19 8C19 8.55228 18.5523 9 18 9C17.4477 9 17 8.55228 17 8C17 7.44772 17.4477 7 18 7C18.5523 7 19 7.44772 19 8Z"
                                  fill="currentColor"></path>
                        </svg>
                        <h4 class="card-title" style="padding-left: 0px;margin-bottom: 34px;margin-top: 27px;">Add a
                            goal!
                        </h4>
                        Adding a goal in the same slot will overwrite the old one.
                        <p></p>
                        <div>
                            <form action="addUserGoal/" method="post">
                                {% csrf_token %}
                                Goal Number:<br>
                                <input name="goalNum">
                                <br><br>
                                Goal Number:<br>
                                <select name="goal-options" id="goal-options">
                                    {% for item in Goals %}
                                        <option value="{{ item.goalID }}">
                                            {{ item.name }}
                                        </option>
                                    {% endfor %}
                                </select><br>
                                Goal Type:<br>
                                <select name="goal-type" id="goal-type">
                                    <option value="Recycling">
                                        Recycling
                                    </option>
                                    <option value="Plastic">
                                        Plastic
                                    </option>
                                    <option value="Paper">
                                        Paper
                                    </option>
                                    <option value="Cans">
                                        Cans
                                    </option>
                                    <option value="Glass">
                                        Glass
                                    </option>
                                </select>
                                <br><br>
                                <input type="submit" value="Submit">
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body" style="text-align: center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none"
                             style="font-size: 55px;color: var(--bs-light);background: #719a5e;border-radius: 8px;">
                            <path
                                    d="M3 4C3 3.44772 3.44772 3 4 3H12C12.5523 3 13 3.44772 13 4C13 4.55228 12.5523 5 12 5H4C3.44772 5 3 4.55228 3 4Z"
                                    fill="currentColor" fill-opacity="0.5"></path>
                            <path
                                    d="M3 12C3 11.4477 3.44772 11 4 11H12C12.5523 11 13 11.4477 13 12C13 12.5523 12.5523 13 12 13H4C3.44772 13 3 12.5523 3 12Z"
                                    fill="currentColor" fill-opacity="0.5"></path>
                            <path
                                    d="M3 16C3 15.4477 3.44772 15 4 15H12C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17H4C3.44772 17 3 16.5523 3 16Z"
                                    fill="currentColor" fill-opacity="0.5"></path>
                            <path
                                    d="M3 20C3 19.4477 3.44772 19 4 19H12C12.5523 19 13 19.4477 13 20C13 20.5523 12.5523 21 12 21H4C3.44772 21 3 20.5523 3 20Z"
                                    fill="currentColor" fill-opacity="0.5"></path>
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M15.1707 9C15.5825 10.1652 16.6938 11 18 11C19.6569 11 21 9.65685 21 8C21 6.34315 19.6569 5 18 5C16.6938 5 15.5825 5.83481 15.1707 7H4C3.44772 7 3 7.44772 3 8C3 8.55228 3.44772 9 4 9H15.1707ZM19 8C19 8.55228 18.5523 9 18 9C17.4477 9 17 8.55228 17 8C17 7.44772 17.4477 7 18 7C18.5523 7 19 7.44772 19 8Z"
                                  fill="currentColor"></path>
                        </svg>
                        <h4 class="card-title" style="padding-left: 0px;margin-bottom: 34px;margin-top: 27px;">Where are
                            you compared to others?</h4>


                        <div class="row">
                            <div class="col">
                                <div class="table-responsive">
                                    <table class="table">
                                        <caption style="caption-side: top; text-align: center;">
                                            Week
                                        </caption>
                                        <thead>
                                        <tr>
                                            <th>User</th>
                                            <th>Kg</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>{{ maxWeek.user }}</td>
                                            <td>{{ maxWeek.curweek }}</td>
                                        </tr>
                                        <tr>
                                            <td>{{ Profile.user }}</td>
                                            <td>{{ Profile.curweek }}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col">
                                <div class="table-responsive">
                                    <table class="table">
                                        <caption style="caption-side: top; text-align: center;">
                                            Month
                                        </caption>
                                        <thead>
                                        <tr>
                                            <th>User</th>
                                            <th>Kg</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>{{ maxMonth.user }}</td>
                                            <td>{{ maxMonth.curmonth }}</td>
                                        </tr>
                                        <tr>
                                            <td>{{ Profile.user }}</td>
                                            <td>{{ Profile.curmonth }}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col">
                                <div class="table-responsive">
                                    <table class="table">
                                        <caption style="caption-side: top; text-align: center;">
                                            Year
                                        </caption>
                                        <thead>
                                        <tr>
                                            <th>User</th>
                                            <th>Kg</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>{{ maxYear.user }}</td>
                                            <td>{{ maxYear.curyear }}</td>
                                        </tr>
                                        <tr>
                                            <td>{{ Profile.user }}</td>
                                            <td>{{ Profile.curyear }}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}